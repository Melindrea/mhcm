#!/usr/bin/env node

// GRUNT-GITHOOKS START
// https://npmjs.org/package/execSync
// Executes shell commands synchronously
var sh = require('execSync').run;
var branchName = require('execSync').exec('git branch | grep \'*\' | sed \'s/* //\'').stdout.trim(),
issueNumber, rePattern, matches;

if (branchName !== '(no branch)') {
    rePattern = /[a-zA-Z]+\/([0-9]+)$/;
    matches = rePattern.exec(branchName);

    if (matches !== null) {
        // Branch name is named along the lines of <label>/<issue>, so the prefix is
        // #<issue>
        issueNumber = matches[1];
        sh('ghi show ' + issueNumber);
    } else {
        console.log('You are on branch "' + branchName + '", which is not a feature branch.');
    }
}
